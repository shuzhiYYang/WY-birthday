<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Happy Marriage</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #93c5fd, #f9a8d4);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      transition: background 1s ease-in-out;
    }

    /* Password Card */
    .card {
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      text-align: center;
      width: 320px;
      animation: fadeIn 1s forwards;
    }

    h2 {
      color: #111827;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    input {
      padding: 10px;
      width: 80%;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 10px;
      outline: none;
    }

    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background-color: #2563eb;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #1e40af;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Hidden Happy Marriage part */
    #happy-marriage {
      display: none;
      width: 100%;
      height: 100%;
      color: #fadadd;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      overflow-y: auto;
      padding: 2rem;
      box-sizing: border-box;
    }

    h1 {
      font-family: 'Great Vibes', cursive;
      color: #ff8da1;
      font-size: 3.2rem;
      margin-bottom: 2rem;
      text-align: center;
      line-height: 1.4;
      text-shadow: 1px 1px 3px black;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(11, 80px);
      grid-template-rows: repeat(9, 80px);
      gap: 4px;
      width: max-content;
      margin: 0 auto;
    }

   .grid div {
      width: 80px;
      height: 80px;
    }

    .photo {
      background-size: cover;
      background-position: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      border-radius: 16px;
      width: 120px;
      height: 120px;
    }

    .message p {
      font-family: "微软雅黑", "Microsoft YaHei", sans-serif;
      font-size: 1.2rem;
      text-align: left;
      line-height: 1.6;
      margin-top: 2rem;
    }

    /* Countdown and Fireworks */
    #countdown-screen, #celebration-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #countdown-screen {
      background: black;
      color: white;
      font-size: 6rem;
      font-weight: bold;
    }

    #countdown-text {
      animation: scaleUp 1s ease-in-out infinite;
    }

    @keyframes scaleUp {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.5); opacity: 0; }
    }

    #celebration-screen {
      background: black;
      flex-direction: column;
    }

    .celebration-text {
      position: absolute;
      top: 5%;
      font-size: 4rem;
      color: #ed1c24;
      text-shadow: 2px 2px 5px black;
      font-family: 'Great Vibes', cursive;
    }

    #fireworks-canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }

    #play-music {
      margin-bottom: 1rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>

  <!-- 🔒 Password Page -->
  <div id="password-page" class="card">
    <h2>This is for my one and only, my dearest and cutest bae, so please type your name to unlock ♥</h2>
    <input type="text" id="password" placeholder="Your name">
    <br>
    <button onclick="checkPassword()">Submit</button>
  </div>

  <!-- 🎉 Hidden Happy Marriage Page -->
  <div id="happy-marriage">
    <button id="play-music">Click for Background Music 🎵</button>

    <div id="countdown-screen">
      <div id="countdown-text">3</div>
    </div>

    <div id="celebration-screen">
      <canvas id="fireworks-canvas"></canvas>
      <h1 class="celebration-text">Happy Birthday!</h1>
      <video id="blessing-video" src="blessing.mp4" preload="auto" style="display:none;"></video>
    </div>

    <div id="main-content" style="display:none;">
      <h1>Wishing my cute cute Chin Chin bae a happy 27th birthday!</h1>

      <div class="grid" id="heart-grid"></div>

      <div class="message">
        <p>我最爱只爱的钱钱宝：<br><br><br>

见信如晤！和钱钱宝分开才一月有余，却感觉已如隔三秋啦，但日子并不难熬，因为每天都有宝的陪伴，有宝给我加油打气，一想到宝也在为了我们能早日相聚而努力，每一天都感觉充满了力量。<br><br>

不知道宝喜不喜欢我给宝准备的小惊喜？嘿嘿，如果喜欢的话一定要告诉我，好好夸夸我哦。翻看照片时，脑海中再一次涌现出过去两年的美好回忆，看到我和宝甜甜亲吻的照片，看到我们一起看过无比美丽的风景，再一次感叹自己度过了我人生中无比幸福的两年时光，和宝留下的每一段回忆，在任何难过的时候回想起来都是治愈的良药。现在，我们bucket lists中已经很多get ticked啦，但是还有源源不断的、无穷无尽的有趣的事情想和宝在人生中一起探索，期待和宝未来的adventure！<br><br>

27岁正是人生最美好的年纪，少了很多幼时的懵懂无知，在这样的年纪我们更加懂得珍惜，努力生活，相信在不久的将来我的优秀宝会收获更多，在人生的方方面面中都拥有充足的底气。非常荣幸地陪伴了宝第三个生日，以后还要给宝庆祝多到数不完的生日，希望宝幸福的旅途中都有我的身影。<br><br>

再一次祝我最可爱的钱钱宝生日快乐，永远快乐，岁岁平安，年年康健。永远期待我们一起创造的下一段美好回忆。<br><br><br>

爱你的杨杨宝^3^<br><br>
2025.10.31</p>
      </div>
    </div>

    <audio id="background-music" src="music.mp3" preload="auto" loop></audio>
  </div>

  <script>
    const validPasswords = ["Weng Yik Chin", "钱詠昱"];

    function checkPassword() {
      const input = document.getElementById("password").value.trim();
      const passwordPage = document.getElementById("password-page");
      const happyMarriage = document.getElementById("happy-marriage");

      if (validPasswords.includes(input)) {
        passwordPage.style.display = "none";
        happyMarriage.style.display = "block";
        document.body.style.background = "black";
        startCountdown();
      } else {
        alert("Incorrect name. Please try again ♥");
      }
    }

  // 心形照片拼接
const heartShape = [
"01110001110",
"11111011111",
"11111111111",
"11111111111",
"01111111110",
"00111111100",
"00011111000",
"00001110000",
"00000100000",
];
  const container = document.getElementById('heart-grid');
  let photoIndex = 1;
  const maxPhotos = 63;
  for (let row = 0; row < heartShape.length; row++) {
    for (let col = 0; col < heartShape[row].length; col++) {
      const cell = document.createElement('div');
      if (heartShape[row][col] === '1' && photoIndex <= maxPhotos) {
        cell.classList.add('photo');
        cell.style.backgroundImage = `url('photo${photoIndex}.jpg')`;
        photoIndex++;
      }
      container.appendChild(cell);
    }
  }

    // === Marriage Animation Logic ===
    const countdownScreen = document.getElementById('countdown-screen');
    const countdownText = document.getElementById('countdown-text');
    const celebrationScreen = document.getElementById('celebration-screen');
    const blessingVideo = document.getElementById('blessing-video');
    const mainContent = document.getElementById('main-content');
    const playMusicBtn = document.getElementById('play-music');
    const backgroundMusic = document.getElementById('background-music');

    function startCountdown() {
      countdownScreen.style.display = 'flex';
      let count = 3;
      countdownText.textContent = count;

      const interval = setInterval(() => {
        count--;
        if (count > 0) {
          countdownText.textContent = count;
        } else {
          clearInterval(interval);
          countdownScreen.style.display = 'none';
          celebrationScreen.style.display = 'flex';
          playBlessing();
          launchFireworks();
        }
      }, 1000);
    }

    function playBlessing() {
      blessingVideo.style.display = 'block';
      blessingVideo.play().catch(() => {
        alert('请点击页面以播放祝福视频');
      });
    }

    blessingVideo.addEventListener('ended', () => {
      celebrationScreen.style.display = 'none';
      mainContent.style.display = 'block';
    });

    playMusicBtn.addEventListener('click', () => {
      if (!backgroundMusic.paused) {
        backgroundMusic.pause();
        playMusicBtn.textContent = 'Click for Background Music 🎵';
      } else {
        blessingVideo.pause();
        backgroundMusic.play();
        playMusicBtn.textContent = 'Click to Stop Music ⏸️';
      }
    });

    function launchFireworks() {
      const canvas = document.getElementById('fireworks-canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const particles = [];

      function randomColor() {
        return `hsl(${Math.random() * 360}, 100%, 70%)`;
      }

      for (let i = 0; i < 180; i++) {
        particles.push({
          x: canvas.width / 2,
          y: canvas.height / 2 - 240,
          angle: Math.random() * 2 * Math.PI,
          speed: Math.random() * 3 + 2,
          radius: Math.random() * 3 + 2,
          color: randomColor(),
          alpha: 1
        });
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
          const dx = Math.cos(p.angle) * p.speed;
          const dy = Math.sin(p.angle) * p.speed;
          p.x += dx;
          p.y += dy;
          p.alpha -= 0.015;
          if (p.alpha < 0) p.alpha = 0;
          const hueMatch = p.color.match(/\d+\.?\d*/);
          const hue = hueMatch ? hueMatch[0] : 0;
          ctx.fillStyle = `hsla(${hue}, 100%, 70%, ${p.alpha})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
          ctx.fill();
        });
        if (particles.some(p => p.alpha > 0)) requestAnimationFrame(animate);
      }
      animate();
    }
  </script>

</body>
</html>
